<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>お問い合わせ - 長崎大学柔道部</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="img/icon-cat.png" type="image/icon">
    <!-- <script src="auth.js" defer></script> -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-2GG1ZT0HK1"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-2GG1ZT0HK1');
        </script>
</head>
<body>
    <!-- ヘッダー -->
    <header>
        <div class="logo-container"> 
            <a href="index.html">
                <img src="img/N_judo_logo.png" alt="柔道のロゴ" class="judo-logo"> 
            </a>
            <img src="img/nagasaki_cat.png" alt="猫のロゴ" class="neko-logo">
        </div>
        <div class="header-right">
            <div class="social-icons">
                <a href="https://www.instagram.com/nagasaki_judo/?hl=ja" rel="me" target="_blank" aria-label="Instagram">
                    <img src="img/Insta_logo.png" alt="Instagram" class="icon">
                </a>
                <a href="https://x.com/nujudoclub" target="_blank" aria-label="X">
                    <img src="img/X_logo.png" alt="X" class="icon">
                </a>
            </div>
            <button class="hamburger" id="hamburger">
                <span></span>
                <span></span>
                <span></span>
            </button>
            <nav>
                <ul id="menu">
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="member.html">部員紹介</a></li>
                    <li><a href="result.html">過去の成績</a></li>
                    <li><a href="access.html">アクセス</a></li>
                    <li><a href="contact.html">お問い合わせ</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <!-- メインコンテンツ -->
    <main>
        <hr class="blue-line"><!-- デザイン用のライン（CSSで調整） -->

        <!-- お問い合わせメッセージ -->
        <div class="contact-notice">
            <p>
                メールでのお問い合わせは対応に最大1カ月程度かかることがあります。<br>
                <a href="https://www.instagram.com/nagasaki_judo/" rel="me" target="_blank" class="dm-link">
                    InstagramのDM
                </a>
                が早く確実であるため是非ご利用ください。
            </p>
        </div>

        <!-- メールフォーム -->
        <section class="contact-form-section">
            <h2>メールフォーム</h2>
            
            <!-- action, methodを直接指定せずJSで送信を制御 -->
            <form id="contact-form" class="contact-form">
                <div class="form-group">
                    <label for="email">メールアドレス <span style="color: red;">*</span></label>
                    <input 
                        type="email"
                        id="email"
                        name="email"
                        placeholder="example@domain.com"
                        required
                    />
                </div>
        
                <div class="form-group">
                    <label for="message">お問い合わせ内容 <span style="color: red;">*</span></label>
                    <textarea
                        id="message"
                        name="message"
                        rows="6"
                        placeholder="お問い合わせ内容をこちらに入力してください"
                        required
                    ></textarea>
                </div>
        
                <div class="form-group">
                    <button type="submit" class="submit-button">送信</button>
                </div>
            </form>
        </section>
    </main>

    <!-- フッター -->
    <footer>
        <div class="footer-container">
            <!-- 左カラム -->
            <div class="footer-left">
                <div class="footer-left-left">
                    <!-- 左上にロゴ -->
                    <div class="footer_logo">
                        <img src="img/judo_footerlogo.png" alt="フッター用柔道部ロゴ" class="judo_footerlogo">
                    </div>          
                    <!-- 左下にSNSアイコン -->
                    <div class="footer-icons">
                        <a href="https://www.instagram.com/nagasaki_judo/" rel="me" target="_blank">
                            <img src="img/Insta_logo.png" alt="Instagram" />
                        </a>
                        <a href="https://x.com/nujudoclub" target="_blank">
                            <img src="img/X_logo.png" alt="X" />
                        </a>
                    </div>
                </div>
                <div class="footer-left-right">
                    <img src="img/cat.png" alt="猫のロゴ" class="neko-nage">
                </div>
            </div>
    
            <!-- 右カラム（リンク） -->
            <div class="footer-right">
                <ul class="footer-links">
                    <li><a href="index.html">HOME</a></li>
                    <li><a href="member.html">部員紹介</a></li>
                    <li><a href="result.html">過去の成績</a></li>
                    <li><a href="access.html">アクセス</a></li>
                    <li><a href="contact.html">お問い合わせ</a></li>
                </ul>
            </div>
        </div>
    
        <!-- 下部の区切り線 -->
        <hr class="footer-line">
        <!-- コピーライト等のメッセージ -->
        <p class="footer-end">
            © 2025 Nagasaki University Judo Team. &ensp; All rights reserved.
        </p>
    </footer>

    <!-- メインJS -->
    <script src="main.js"></script>

    <!-- ★ フォーム送信用スクリプト ★ -->
    <script>
    const form = document.getElementById('contact-form');

    form.addEventListener('submit', async function(e) {
      e.preventDefault(); // 標準のフォーム送信をキャンセル

      // 1) フォームデータを取得
      const formData = new FormData(form);

      // 2) FormspreeのエンドポイントURL（自分のフォームURLに変更）
      const formspreeUrl = 'https://formspree.io/f/xzzdwnar';

      try {
        // 3) fetch で送信
        const response = await fetch(formspreeUrl, {
          method: 'POST',
          body: formData,
          headers: {
            'Accept': 'application/json'  // JSONでのレスポンスを期待
          }
        });

        // 4) レスポンスが正常かどうかをチェック
        if (response.ok) {
          // 送信成功
          alert('送信が完了しました。\nトップページに戻ります。');
          window.location.href = 'index.html'; // index.htmlへリダイレクト
        } else {
          // 送信失敗（Formspreeのエラーレスポンスが返ってきた場合）
          const data = await response.json();
          if (data && data.errors) {
            // Formspreeのバリデーションエラーなど
            alert('送信エラー:\n' + data.errors.map(e => e.message).join('\n'));
          } else {
            // その他のエラー
            alert('送信に失敗しました。\n時間を置いて再度お試しください。');
          }
        }
      } catch (error) {
        // ネットワークエラー等でfetchに失敗した場合
        console.error('通信エラー:', error);
        alert('送信に失敗しました。\n通信環境を確認の上、再度お試しください。');
      }
    });
    </script>
</body>
</html>
